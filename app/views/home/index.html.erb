<script type="text/javascript">
  ShopifyApp.ready(function(){
    ShopifyApp.Bar.initialize({
      title: "Home"
    });
  });
</script>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Promo bars</h3>
  </div>
  <div class="panel-body">
    <% if notice %>
      <div class="alert alert-success" role="alert">
        <%= notice %>
      </div>
    <% end %>
    <!--<p>Script counter: <%#= @counter %></p>-->

    <%# if @sc.is_a? String %>
      <!--<p><%#= @sc %></p>-->
    <%# else %>
      <!--<p>Script attributes: <%#= @sc.attributes.inspect %></p>-->
    <%# end %>

    <table class="table table-bordered table-striped table-hover" style="text-align:center;">
      <caption>
        HEADER BANNERS
      </caption>
      <thead>
      <tr>
        <th>ORDER</th>
        <th>BAR TITLE</th>
        <th>BAR TEXT</th>
        <th>BUTTON</th>
        <th>SUB-HEADER</th>
        <th>DATE</th>
        <th>ON/OFF</th>
      </tr>
      </thead>

      <tbody>
      <% @promobars.each_with_index do |bar, i| %>
          <% if bar.bar_type == 1 %>
            <tr>
              <td><%= i+1 %></td>
              <td><%= link_to bar.name, edit_promobar_path(bar) %></td>
              <td><%= bar.text %></td>
              <td><%= bar.button_on ? "YES" : "NO"%></td>
              <td>NO</td> 
              <td ><%= bar.updated_at == bar.created_at ? 'Created: ' + bar.created_at.to_s: 'Updated: ' + bar.updated_at.to_s %></td>
              <td>
              <input class="promobar_switcher" id=<%="#{bar.id}"%> type="checkbox" <%= bar.promobar_show ? "checked" : "unchecked" %> />
              </td>
            </tr>
          <% end %>
      <% end %>

      <% unless @promobars.any? %>
          <tr>
            <td colspan="7">No header banners found.</td>
          </tr>
      <% end %>

      </tbody>
    </table>

    <table class="table table-bordered table-striped table-hover" style="text-align:center;">
      <caption>
        FOOTER BANNERS
      </caption>
      <thead>
      <tr>
        <th>ORDER</th>
        <th>BAR TITLE</th>
        <th>BAR TEXT</th>
        <th>BUTTON</th>
        <th>SUB-HEADER</th>
        <th>DATE</th>
        <th>ON/OFF</th>
      </tr>
      </thead>

      <tbody>
      <% @promobars.each_with_index do |bar, i| %>
          <% if bar.bar_type == 2 %>
            <tr>
              <td><%= i+1 %></td>
              <td><%= link_to bar.name, edit_promobar_path(bar) %></td>
              <td><%= bar.text %></td>
              <td><%= bar.button_on ? "YES" : "NO"%></td>
              <td>NO</td> 
              <td ><%= bar.updated_at == bar.created_at ? 'Created: ' + bar.created_at.to_s: 'Updated: ' + bar.updated_at.to_s %></td>
              <td>
              <input class="btn btn-primary promobar_switcher" id=<%="#{bar.id}"%> name="commit" type="button" value="<%= bar.promobar_show ? "BANNER ON": "BANNER OFF" %>" />
              </td>
            </tr>
          <% end %>
      <% end %>

      <% unless @promobars.any? %>
          <tr>
            <td colspan="7">No footer banners found.</td>
          </tr>
      <% end %>

      </tbody>
    </table>

    <%= link_to 'Add promo bar', new_promobar_path, class: 'btn btn-primary' %>

  </div>
</div>
